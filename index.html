<!doctype html>
<html lang="de">

<head>
    <meta charset="utf-8">

    <title>Java 9: A short summary &amp; overview over the new features</title>

    <meta name="description" content="A short summary &amp; overview over the new features of Java 9">
    <meta name="author" content="Benjamin Schmid">

    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/black.css" id="theme">

    <!-- Code syntax highlighting -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <!-- Custom, overriding CSS -->
    <link rel="stylesheet" href="css/custom.css">

    <!-- Printing and PDF exports -->
    <script>
        var link = document.createElement('link');
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
        document.getElementsByTagName('head')[0].appendChild(link);
    </script>

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
</head>

<body>

<a href="https://github.com/bentolor/java9-in-action">
    <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 1"
         src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67"
         alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"></a>

<div class="reveal">

    <!-- Any section element inside of this container is displayed as a slide -->
    <div class="slides">

        <!--
          === Title ===============================================================================
        -->

        <section>
            <div style="width: 80%; margin: 0 auto">
                <h1 style="margin: 00px 0 80px 0">Java 9</h1>
                <h5><i> Lightning Talk:</i></h5>
                <h3 style="text-align: left" class="emphasize">An overview over <br/>the new features</h3>
            </div>
                <div id="helpfooter">
                    <code>?</code> for help, <code>space</code> to navigate
                    </p>
                </div>
                <div id="version">
                    2016-07-05
                </div>

                <div class="profile" style="position: absolute; top: 150px; left: 800px">
                    <div class="profile-sidebar">
                        <div class="profile-userpic">
                            <img data-src="img/BenjaminSchmid.jpg" class="img-responsive" alt="">
                        </div>
                        <div class="profile-usertitle">
                            <div class="profile-usertitle-name">
                                Benjamin Schmid
                            </div>
                            <div class="profile-usertitle-job">
                                Technology Advisor
                            </div>
                        </div>
                    </div>
                    <div class="profile-content">
                        <a href="https://twitter.com/bentolor">@bentolor</a>
                    </div>
                </div>

                <div id="rightsection">
                    <b>Tip: </b><a  class="c-ref" href="#"><code>filename</code></a> and <a href="#" class="jep">JEP</a> are direct links
                </div>

                <div id="licence">
                    <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
                        <img alt="Creative Commons Lizenzvertrag"
                             src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png"/></a>
                    <br/><span xmlns:dct="http://purl.org/dc/terms/"
                               href="http://purl.org/dc/dcmitype/InteractiveResource"
                               property="dct:title" rel="dct:type">Java 9: An short summary &amp; overview over the new features</span>
                    by
                    <a xmlns:cc="http://creativecommons.org/ns#" href="https://twitter.com/bentolor"
                       property="cc:attributionName" rel="cc:attributionURL">Benjamin Schmid</a>
                    <br/>is licensed under a
                    <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
                        Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License.</a>.
                    Based in parts on the work of <a xmlns:dct="http://purl.org/dc/terms/"
                                                          href="http://lab.hakim.se/reveal-js/" rel="dct:source">Reveal.JS</a>.
                </div>
        </section>


        <!--
          === Overview ============================================================================
        -->


        <section>

            <!--<section>-->
            <!--<h1>Java 9</h1>-->
            <!--<h3>in a nutshell</h3>-->
            <!--</section>-->

            <!--<section>-->
            <div>
                <div data-markdown>
                    ## Datasheet
                </div>
                <div style="width: 85%; margin: 0 auto;">
                    <div data-markdown class="twocol">
                        ##### Datasheet
                        - **82** JEP targeted
                        - GA Release:   <!-- -->
                        ~~2016-09-22~~ **2017-03-23**
                        - Brewing since: 2014-08-11
                    </div>
                    <div data-markdown class="twocol">
                        ##### Highlights
                        - Jigsaw
                        - Tooling
                        - HTTP API
                        - Language details
                    </div>
                </div>
            </div>
            <!--</section>-->

        </section>

        <!--
          === Tooling =============================================================================
        -->

        <section>


            <section>

                <div data-markdown>
                    # Tooling
                </div>
            </section>


            <section>
                <div data-markdown>
                    <script type="text/template">
                        ### REPL: `jshell`

                        ```
                        ⋊> ~ jshell
                        |  Welcome to JShell -- Version 9-ea
                        |  For an introduction type: /help intro

                        jshell> 3 + 4 * 7
                        $1 ==> 31

                        jshell> int add(int a, int b) {
                        ...>   return a+b;
                        ...> }
                        |  created method add(int,int)

                        jshell> add(25, $1)
                        $3 ==> 56
                        ```
                        <!-- .element: class="small" -->

                        Get an overview with `/help` and  `/help shortcuts`
                    </script>
                </div>
            </section>


            <section>
                <div data-markdown class="container">
                    <script type="text/template">
                        ### HTML5 Javadoc
                        - Enable via `-html5` parameter
                        - Search capability
                        - HTML5 & updated Doclet API
                        - Improved DocLint: <span>`-Xdoclint/package:java.*,javax.*`</span> <!-- .element: class="small" -->
                    </script>
                </div>
            </section>


            <section>
                <h3>HTML5 Javadoc example output</h3>
                <img src="img/javadoc-html5-example.png" alt="Example Java 9 Javadoc output with HTML5 enabled">
            </section>


            <section>
                <div data-markdown style="width: 60%; margin: 0 auto">
                    <script type="text/template">
                        ### Cross compiling
                        #### and the `javac -release` flag
                        ````
                        javac - release N
                        ````
                        <!-- .element: class="small" -->

                        ...is equivalent to

                        ````
                        javac -source N -target N –bootclasspath rtN.jar ...
                        ````
                        <!-- .element: class="small" -->
                    </script>
                </div>
            </section>


        </section>


        <section>


            <section>
                <div class="small">
                    <div data-markdown>
                        ## Language details
                    </div>

                    <div class="twocol">
                        <div data-markdown>
                            <script type="text/template">
                                ##### Process Control [`ControlProcess.java`](https://github.com/bentolor/java9-in-action/blob/master/playground/src/main/java/de/exxcellent/java9/process/ControlProcess.java) <!-- .element: class="c-ref" -->
                                - Retrieve & inspect processes
                                - Kill processes

                                ##### Collections [`ImmutableCollections.java`](https://github.com/bentolor/java9-in-action/blob/master/playground/src/main/java/de/exxcellent/java9/collections/ImmutableCollections.java) <!-- .element: class="c-ref" -->
                                ```
                                List/Map/Set.of(1, 2, 3);
                                ```

                                ##### Enhanced Deprecated
                                ````java
                                @Deprecated(since ="1.5", forRemoval = true)
                                ````

                            </script>
                        </div>
                    </div>
                    <div class="twocol" data-markdown>
                        <script type="text/template">
                            ##### Stream
                            ```
                            InputStream.transferTo(OutputStream out);
                            ```

                            ##### StackWalker [`StackWalkerExample.java`](https://github.com/bentolor/java9-in-action/blob/master/playground/src/main/java/de/exxcellent/java9/util/StackWalkerExample.java) <!-- .element: class="c-ref" -->

                            ##### Package name
                            ````
                            this.getClass().getPackageName()
                            ````
                        </script>
                    </div>
                </div>
            </section>


            <section>
                <div data-markdown>
                    ### Process Control
                    ````java
                    <pre>// Get PIDs of own or started processes
                    out.println("Your pid is " + ProcessHandle.current().pid());

                    Process p = Runtime.getRuntime().exec("sleep 1h");
                    ProcessHandle h = ProcessHandle.of(p.pid())  // Optional
                            .orElseThrow(IllegalStateException::new);

                    // Do things on exiting process          // CompletableFuture
                    h.onExit().thenRun( ()-&gt; out.println("Sleeper exited") );

                    // Get info on process
                    out.printf("[%d] %s - %s\n", h.pid(),
                               h.info().user().orElse("unknown"),
                               h.info().commandLine().orElse("none"));

                    // Kill a process
                    h.destroy();</pre>
                    ````
                </div>
            </section>


            <section>
                <div data-markdown>
                    ### Immutable Collection Factories
                    ````java
                    <pre>/* Comment sections would break ... */
                    List&lt;Integer&gt; listOfNumbers = List.of(1, 2, 3, 4, 5/*, null*/);

                    Set&lt;Integer&gt; setOfNumbers = Set.of(1, 2, 3, 4, 5/*, 1*/);

                    Map&lt;String, String&gt; mapOfString =
                        Map.of("key1", "value1", "key2", "value2");

                    Map&lt;String, String&gt; moreMapOfString =
                        Map.ofEntries(
                            Map.entry("key1", "value1"),
                            Map.entry("key2", "value2")/*,
                            Map.entry("key1", "value3")*/
                    );
                    ````
                </div>
            </section>


            <section>
                <div data-markdown style="font-size: .92em;">
                    ### StackWalker
                    ````java
                    <pre>// return class/method only for our classes.
                    private static List&lt;String&gt; walkAndFilterStackframe() {
                      return StackWalker.getInstance().walk(s -&gt;
                        s.map( frame-&gt; frame.getClassName()+"/"+frame.getMethodName())
                               .filter(name -&gt; name.startsWith("de.exxcellent"))
                               .limit(10)
                               .collect(Collectors.toList()) );
                    }</pre>
                    ````
                </div>
            </section>


            <section>
                <div data-markdown>
                    ### New Input Stream Utilities
                    ````java
                    <pre>// All bytes from an InputStream at once
                    byte[] result = new ByteArrayInputStream(buf)
                        .readAllBytes();

                    // Directly redirect an InputStream to an OutputStream
                    new ByteArrayInputStream(buf)
                        .transferTo(System.out);</pre>
                    ````
                </div>
            </section>


        </section>


        <section>
            <div data-markdown>
                ### HTTP/2 Client
                ````java
                /**
                 * The HTTP API functions asynchronously &amp; synchronously. In
                 * asynchronous mode, work is done in threads (ExecutorService).
                 */
                public static void main(String[] args) throws Exception {
                  HttpClient.getDefault()
                    .request(URI.create("https://www.exxcellent.de"))
                    .GET()
                    .responseAsync() // CompletableFuture :D
                    .thenAccept(httpResponse ->
                        out.println(httpResponse.body(HttpResponse.asString()))
                    );
                  Thread.sleep(999); // Give worker thread some time.
                }
                ````
            </div>
        </section>



        <!--
          === Details =============================================================================
        -->
        <section>


            <section>
                <div data-markdown>
                    # Jigsaw
                </div>
            </section>


            <section>
                <div data-markdown>
                    <script type="text/template">
                        ## Jigsaw [JEP 201](http://openjdk.java.net/jeps/201)<!-- .element: class="jep" -->

                        > Modules bundle together one or more packages
                        > and offer stronger encapsulation than jars

                        - Allow **scaled down runtime JAR**  &rarr; IoT
                        - **Stronger:** In a module: `public` is no longer public to others
                        - _Sad:_ No module versioning

                    </script>
                </div>
            </section>


            <section>
                <div data-markdown>
                    <script type="text/template">
                        ### How it works (1)
                        `module-info.java` files declare dependencies

                        ```java
                        module com.mysql.jdbc {
                            // Module dependency
                            requires java.sql;

                            // exported package in module
                            exports com.mysql.jdbc;

                            // Implements service with instance
                            provides java.sql.Driver with com.mysql.jdbc.Driver;
                        }
                        ```
                    </script>
                </div>
            </section>


            <section>
                <div data-markdown class="container">
                    <script type="text/template">
                        ### How it works (2)
                        ##### Changes to `javac` and `java` to use modules instead of JARs
                        ````
                        javac -mp modulepath ...
                        java  -mp modulepath -m modulename/moduleclass
                        ````

                        ##### Linker
                        `jlink` can be used to link a set of modules, along with their transitive dependences,
                        to create a custom modular run-time image

                    </script>
                </div>
            </section>


            <section>
                <div data-markdown >
                    <script type="text/template">
                        ### `ServiceLoader` using modules (1)
                        ````
                        public abstract class BillingService {

                          public static BillingService getInstance() {
                            // Java SPI to find the instance
                            ServiceLoader<BillingServiceProvider> sl =
                               ServiceLoader.load(BillingServiceProvider.class);

                            // Fetch first provider implementation
                            Iterator<BillingServiceProvider> it = sl.iterator();

                            return it.next().buildBillingService();
                          }

                          public abstract String takeMoney();
                        }
                        ````
                    </script>
                </div>
            </section>


            <section>
                <div data-markdown style="font-size: .9em">
                    <script type="text/template">
                        ### `ServiceLoader` using modules (2)
                        ````java
                        module anothermodule {
                          exports de.exxcellent.anothermodule;
                          requires de.exxcellent.java9;

                          // Provide Service instance (SPI with Jigsaw modules)
                          provides de.exxcellent.java9.jigsaw.spi.BillingServiceProvider
                          with de.exxcellent.anothermodule.spi.MastercardBillingServiceProvider;
                        }
                        ````
                    </script>
                </div>
            </section>


            <section>
                <div data-markdown>
                    <script type="text/template">
                        ### How it works (3)
                        ````
                        $ mkdir -p target/module/de.exxcellent.java9
                        $ mkdir -p target/module/anothermodule

                        $ javac $(find playground/src/main/java -name "*.java") \
                                -d target/module/de.exxcellent.java9
                        $ javac $(find playground-dependent/src/main/java -name "*.java")\
                                -d target/module/anothermodule \
                                -modulepath target/module

                        $ java  -modulepath target/module \
                                -m anothermodule/de.exxcellent.anothermodule.TestJigsawSPI
                        Mastercard billed the money!

                        ````
                    </script>
                </div>
            </section>


            <section>
                <div class="container">
                    <div data-markdown>
                        ### Tools
                        - List built-in modules: `java –listmods`
                        - Find dependencies: `jdeps –jdkinternals app.jar`
                    </div>
                    <div data-markdown style="margin-top: 60px">
                        ### Resources
                        - [JVM Module Summary](http://cr.openjdk.java.net/~mr/jigsaw/ea/module-summary.html)
                        - [The State of the Module System](http://openjdk.java.net/projects/jigsaw/spec/sotms/)
                    </div>
                </div>
            </section>


        </section>


        <section>
            <section>
                <div class="small">
                    <div data-markdown>
                        ## Many (obscure) Details
                    </div>

                    <div class="twocol" data-markdown>
                        <script type="text/template">
                            ##### Performance
                            - Improve Contended Locking [JEP 102](http://openjdk.java.net/jeps/143)<!-- .element: class="jep" -->
                            - Segmented Code Cache [JEP 197](http://openjdk.java.net/jeps/197)<!-- .element: class="jep" -->
                            - Smart Java Compilation [JEP 199](http://openjdk.java.net/jeps/199)<!-- .element: class="jep" -->

                            ##### Unified JVM Logging
                            - Same logging for _whole_ JVM (GC, ...)
                            [JEP 158](http://openjdk.java.net/jeps/158) <!-- .element: class="jep" -->

                            ##### Obscure stuff
                            - JVM Compiler Control [JEP 165](http://openjdk.java.net/jeps/165)<!-- .element: class="jep" -->
                            - UDP Security (DTLS) [JEP 219](http://openjdk.java.net/jeps/219)<!-- .element: class="jep" -->
                            - Variable Handles [JEP 193](http://openjdk.java.net/jeps/193)<!-- .element: class="jep" -->
                            - Remove depcreated GC combinations
                            [JEP 214](http://openjdk.java.net/jeps/214) <!-- .element: class="jep" -->
                            - Process Import Statements Correctly
                            [JEP 216](http://openjdk.java.net/jeps/216) <!-- .element: class="jep" -->

                        </script>
                    </div>

                    <div class="twocol" data-markdown>
                        <script type="text/template">
                            ##### HTTP 2 Client
                            -  implements HTTP/2 and WebSocket
                            [JEP 110](http://openjdk.java.net/jeps/110) <!-- .element: class="jep" -->
                            [`HttpClientExample.java`](https://github.com/bentolor/java9-in-action/blob/master/playground/src/main/java/de/exxcellent/java9/http/HttpClientExample.java) <!-- .element: class="c-ref" -->

                            ##### Fixes / Enhancements
                            - UTF-8 Property Files
                            [JEP 226](http://openjdk.java.net/jeps/226) <!-- .element: class="jep" -->
                            - HiDPI Graphics on Windows and Linux
                            [JEP 263](http://openjdk.java.net/jeps/263) <!-- .element: class="jep" -->
                            - Milling Project Coin <span>(5 enhancements)</span> <!-- .element: class="decent small" -->
                            [JEP 213](http://openjdk.java.net/jeps/213) <!-- .element: class="jep" -->
                            - Elide Deprecation Warnings on Imports Statements
                            [JEP 211](http://openjdk.java.net/jeps/211) <!-- .element: class="jep" -->
                            - Resolve Lint and Doclint Warnings
                            [JEP 212](http://openjdk.java.net/jeps/212) <!-- .element: class="jep" -->
                        </script>
                    </div>

                </div>
            </section>


            <section>
                <div data-markdown>
                    <script type="text/template">
                        #### Many many many more
                        Full list see at  http://openjdk.java.net/projects/jdk9/
                    </script>
                </div>
            </section>


        </section>


    </div>
</div>

<script src="lib/js/head.min.js"></script>
<script src="js/reveal.js"></script>

<script>

    // Full list of configuration options available at:
    // https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({
                          // Display controls in the bottom right corner
                          controls: true,

                          // Display a presentation progress bar
                          progress: true,

                          // Display the page number of the current slide
                          slideNumber: true,

                          // Push each slide change to the browser history
                          history: true,

                          // Enable keyboard shortcuts for navigation
                          keyboard: true,

                          // Enable the slide overview mode
                          overview: true,

                          // Vertical centering of slides
                          center: true,

                          // Enables touch navigation on devices with touch input
                          touch: true,

                          // Loop the presentation
                          loop: false,

                          // Change the presentation direction to be RTL
                          rtl: false,

                          // Turns fragments on and off globally
                          fragments: true,

                          // Flags if the presentation is running in an embedded mode,
                          // i.e. contained within a limited portion of the screen
                          embedded: false,

                          // Flags if we should show a help overlay when the questionmark
                          // key is pressed
                          help: true,

                          // Number of milliseconds between automatically proceeding to the
                          // next slide, disabled when set to 0, this value can be overwritten
                          // by using a data-autoslide attribute on your slides
                          autoSlide: 0,

                          // Stop auto-sliding after user input
                          autoSlideStoppable: true,

                          // Enable slide navigation via mouse wheel
                          mouseWheel: true,

                          // Hides the address bar on mobile devices
                          hideAddressBar: true,

                          // Opens links in an iframe preview overlay
                          previewLinks: false,

                          // Transition style
                          transition: 'slide', // none/fade/slide/convex/concave/zoom

                          // Transition speed
                          transitionSpeed: 'default', // default/fast/slow

                          // Transition style for full page slide backgrounds
                          backgroundTransition: 'default', // none/fade/slide/convex/concave/zoom

                          // Number of slides away from the current that are visible
                          viewDistance: 3,

                          // Parallax background image
                          parallaxBackgroundImage: 'img/puzzle.jpg', // e.g. "'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg'"

                          // Parallax background size
                          parallaxBackgroundSize: '1600px 1200px', // CSS syntax, e.g. "2100px 900px"

                          // Amount to move parallax background (horizontal and vertical) on slide change
                          // Number, e.g. 100
                          parallaxBackgroundHorizontal: '',
                          parallaxBackgroundVertical: '',

                          // The "normal" size of the presentation, aspect ratio will be preserved
                          // when the presentation is scaled to fit different resolutions. Can be
                          // specified using percentage units.
                          width: 1280,
                          height: 720,

                          // Factor of the display size that should remain empty around the content
                          margin: 0.05,

                          // Bounds for smallest/largest possible scale to apply to content
                          minScale: 0.2,
                          maxScale: 1.5,

                          // Ctrl + Mouse-Click ==> Zoom in
                          zoomKey: 'ctrl',

                          // Optional reveal.js plugins
                          dependencies: [
                              {
                                  src: 'lib/js/classList.js', condition: function () {
                                  return !document.body.classList;
                              }
                              },
                              {
                                  src: 'plugin/markdown/marked.js', condition: function () {
                                  return !!document.querySelector('[data-markdown]');
                              }
                              },
                              {
                                  src: 'plugin/markdown/markdown.js', condition: function () {
                                  return !!document.querySelector('[data-markdown]');
                              }
                              },
                              {
                                  src: 'plugin/highlight/highlight.js', async: true, condition: function () {
                                  return true;
                              }, callback: function () {
                                  hljs.initHighlightingOnLoad();
                              }
                              },
                              {src: 'plugin/zoom-js/zoom.js', async: true},
                              {src: 'plugin/notes/notes.js', async: true}
                          ]
                      });

</script>


<script src="js/zepto.min.js"></script>
<script>
    Zepto(function ($) {

        var tableOfContents = $('#table-of-contents');
        var tableList = $('<ol />')

        $('.toc-element').each(function (index) {
            var _self = $(this),
                    hash = '#/' + _self.closest('section').index();

            if (_self.text()) {
                tableList.append([
                                     '<li>',
                                     //    '<a href="' + hash + '">',
                                     _self.text(),
                                     //'</a>',
                                     '</li>'
                                 ].join(''));
            }

        });

        tableOfContents.html(tableList);
    });
</script>

</body>
</html>
